<!--pages/gouwuche/gouuche.wxml-->
<view wx:if="{{goodsItem.length == 0}}" class='Container'>
  <view class='list'>
    <block wx:for="{{menu}}">
      <view class='list_a'>
        <image class="image_frame" src="{{item.picUrl}}" mode="aspectFill">
        </image>
        <view>购物车空空如也..</view>
      </view>
    </block>
  </view>
  <navigator url="../index/index" open-type="switchTab" hover-class="other-navigator-hover">
    <button class='btn'>
      去逛逛
    </button>
  </navigator>
  <!-- 列表结束 -->
</view>
<view wx:else class='goods-list'>
  <view class='goods-list-title'>
    <view wx:if="{{isOption}}" bindtap='optionsTap'>编辑</view>
    <view wx:else bindtap='optionsTap'>完成</view>
  </view>
  <view class='goods-list-wrap'>
    <block wx:for="{{goodsItem}}">
      <view class='goods-item'>
        <view class="selectbtn" bindtap='selectOneTap' data-gid='{{item.id}}' data-status='{{item.selectStatus}}'>
          <icon wx:if='{{item.selectStatus}}' type='success' size='20' color="#D4237A"></icon>
          <icon wx:else type='circle' size='20' color="#D4237A"></icon>
        </view>
        <image src='{{item.picture}}' class='goods-img'></image>
        <view class='goods-describe'>
          <view class='c1'>
            <view class='goods-name'>{{item.name}}</view>
            <view class='goods-des'>{{item.brief}}</view>
          </view>
          <view class='goods-other'>
            <view class='price'>{{item.price}}</view>
            <view class='choose-count'>x{{item.counts}}</view>
          </view>
        </view>
        <view class='{{isOption? "default":"goods-options"}}'>
          <view class='count-control'>
            <view class='a' bindtap='addCountTab' data-gid='{{item.id}}'>+</view>
            <view class='c'>{{item.counts}}</view>
            <view class='a' wx:if="{{item.counts > 1}}" bindtap='minCountTab' data-gid='{{item.id}}'>-</view>
            <view class='a' wx:else>-</view>
          </view>
          <view class='del-btn' bindtap='deleteTap' data-gid='{{item.id}}'>
            <text>删除</text>
          </view>
        </view>
      </view>
    </block>
  </view>
  <view class='goods-list-footer'>
    <view class='flex-start'>
      <view class='selectbtn' bindtap='selectAllTap' data-status='{{selectedTypeCounts == goodsItem.length? "true":"false"}}'>
        <icon wx:if='{{selectedTypeCounts == goodsItem.length}}' type='success' size='20' color="#D4237A"></icon>
        <icon wx:else type='circle' size='20' color="#D4237A"></icon>
      </view>
      <text>全选</text>
    </view>
    <view>
      <text>合计:</text>
      <text class='red'>￥{{totalPrice}}</text>
    </view>
    <view class='flex-end' style='background:{{selectedTypeCounts > 0?"#FFA3CB":"#888"}}'>
      <view wx:if="{{!isOption}}" class='delete' bindtap='deleteAllTap'>
        删除
      </view>
      <view wx:elif="{{isOption && selectedTypeCounts > 0}}" class='to-pay' bindtap='subbmitOrder'>
        <text>结算</text>
        <text>({{selectedTypeCounts}})</text>
      </view>
      <view wx:else>
        <text>暂未选择商品</text>
      </view>
    </view>
  </view>
</view>